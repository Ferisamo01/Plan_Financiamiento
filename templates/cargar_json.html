<h3>Pegar JSON</h3>

<textarea id="jsonInput" style="width:100%; height:300px;"></textarea>

<br><br>

<button onclick="enviarJSON()">Procesar</button>

<script>
function enviarJSON() {

    let texto = document.getElementById("jsonInput").value;

    let data;

    try {
        data = JSON.parse(texto);
    } catch(e) {
        alert("JSON invÃ¡lido");
        return;
    }

    fetch("/guardar_datos", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
    })
    .then(r => r.json())
    .then(resp => {
        localStorage.setItem("resultados_financieros", JSON.stringify(resp));
        window.location.href = "/resultados";
    });
}
</script>
